
<div class="box">
    <div class="box-title c">
        <h1>
            <span>当前界面：服务者》服务者费用》缴费确认</span>
        </h1>
        <span style="float:right;padding-right:15px;">
            <a class="btn" href="javascript:;" onclick="we.reload();"><i class="fa fa-refresh"></i>刷新</a>
        </span>
    </div><!--box-title end-->
    <div class="box-content">
    	<div class="box-header">
                        <span class="exam" onclick="on_exam();"><p>待确认：<span style="color:red;font-weight: bold;">0</span></p></span>
                    </div><!--box-header end-->
        <div class="box-search">
            <form action="/qmdd2018/index.php?r=clubMemberUpgrade/index_confirmed" method="get">
                <input type="hidden" name="r" value="clubMemberUpgrade/index_confirmed">
                <input type="hidden" name="club_id" value="2450">
                <input type="hidden" name="free_state_Id" id="free_state_Id" value="">
                                <label style="margin-right:10px;">
                    <span>确认时间：</span>
                    <input style="width:80px;" class="input-text" type="text" placeholder="" id="time_start" name="time_start" value="2024-02-09">
                    <span>-</span>
                    <input style="width:80px;" class="input-text" type="text" placeholder="" id="time_end" name="time_end" value="2024-02-09">
                </label>
                                <label style="margin-right:20px;">
                    <span>项目：</span>
                    <select name="project" ><option value="">请选择</option><option value="188">太极</option><option value="222">散打</option><option value="235">跆拳道</option><option value="236">拳击</option><option value="605">健美操</option><option value="606">健美</option><option value="607">技巧运动</option><option value="608">运动飞机</option><option value="614">航空模型</option><option value="621">田径</option><option value="650">篮球</option><option value="653">棒球</option><option value="654">掷球</option><option value="655">羽毛球</option><option value="656">冬季两项</option><option value="659">搏击</option><option value="660">自行车</option><option value="665">热气球</option><option value="671">飞镖</option><option value="672">保龄球</option><option value="673">赛艇</option><option value="674">台球</option><option value="675">建筑</option><option value="676">汽车</option><option value="677">冰壶</option><option value="678">登山</option><option value="683">信鸽</option><option value="684">舞龙舞狮</option><option value="685">龙舟</option><option value="686">导引养生功</option><option value="687">潜水</option><option value="689">体育舞蹈</option><option value="690">跳水</option><option value="693">马术</option><option value="697">电子竞技</option><option value="698">足球</option><option value="702">击剑</option><option value="703">脚斗士</option><option value="704">钓鱼</option><option value="705">门球</option><option value="706">高尔夫球</option><option value="707">滑翔</option><option value="712">体操</option><option value="716">手球</option><option value="717">曲棍球</option><option value="718">冰球</option><option value="719">柔道</option><option value="720">跳伞</option><option value="727">风筝</option><option value="728">拉丁舞</option><option value="729">救生</option><option value="730">摩托艇</option><option value="731">摩托车</option><option value="732">现代五项</option><option value="738">泰拳</option><option value="739">双节棍</option><option value="740">新媒体</option><option value="741">航海模型</option><option value="748">定向</option><option value="754">健身气功</option><option value="755">壁球</option><option value="756">橄榄球</option><option value="757">业余无线电</option><option value="761">轮滑</option><option value="762">帆船</option><option value="763">垒球</option><option value="764">篆刻</option><option value="765">街舞</option><option value="766">藤球</option><option value="767">滑雪</option><option value="773">皮划艇</option><option value="774">滑板</option><option value="777">游泳</option><option value="778">花样游泳</option><option value="796">雕塑</option><option value="797">滑冰</option><option value="801">毽球</option><option value="802">短兵</option><option value="803">网球</option><option value="804">软式网球</option><option value="805">铁人三项</option><option value="809">乒乓球</option><option value="810">拔河</option><option value="811">射箭</option><option value="812">车辆模型</option><option value="819">排球</option><option value="822">咏春</option><option value="823">举重</option><option value="824">水球</option><option value="827">摔跤</option><option value="828">滑水</option><option value="829">武术套路</option><option value="830">棋类</option><option value="836">桥牌</option><option value="837">设计</option><option value="838">书法</option><option value="839">工艺</option><option value="840">二胡                            </option><option value="841">吉他                            </option><option value="842">绘画</option><option value="843">摄影</option><option value="844">魔术                            </option><option value="846">帆船 </option><option value="865">1</option></select>                </label>
                <label style="margin-right:20px;">
                    <span>龙虎等级：</span>
                    <select name="member_level" ><option value="">请选择</option><option value="249">一虎</option><option value="250">二虎</option><option value="251">三虎</option><option value="252">四虎</option><option value="253">五虎</option><option value="254">一龙</option><option value="255">二龙</option><option value="256">三龙</option><option value="257">四龙</option><option value="258">五龙</option><option value="259">六龙</option><option value="260">七龙</option><option value="261">八龙</option><option value="262">九龙</option></select>                </label>
                <label style="margin-right:10px;">
                    <span>关键字：</span>
                    <input style="width:200px;" class="input-text" type="text" placeholder="请输入账号/姓名" name="keywords" value="">
                </label>
                <button id="click_submit" class="btn btn-blue" type="submit">查询</button>
            </form>
        </div><!--box-search end-->
        <div class="box-table">
            <thead>
                <table class="list">
                                        <tr>
                                                    <th>序号</th>
                            <th>缴费单号</th>
                            <th>GF账号</th>
                            <th>姓名</th>
                            <th>注册项目</th>
                            <th>注册等级</th>
                            <th>缴费方案</th>
                            <th>注册费用(元)</th>
                            <th>收费方式</th>
                            <th>实付金额</th>
                            <th>支付状态</th>
                            <th>注册状态</th>
                            <th>确认时间</th>
                            <th>操作</th>
                                            </tr>
                                    </table>
            </thead>
        </div><!--box-table end-->
        <div class="box-page c"></div>
    </div><!--box-content end-->
</div><!--box end-->
<script>
    $(function(){
        var time_start = $('#time_start');
        var time_end = $('#time_end');
        time_start.on('click',function(){
            var end_input=$dp.$('time_end');
            WdatePicker({startDate:'%y-%M-%D 00:00:00',dateFmt:'yyyy-MM-dd',alwaysUseStartDate:false,onpicked:function(){end_input.click();},maxDate:'#F{$dp.$D(\'time_end\')}'});
        });
        time_end.on('click',function(){
            WdatePicker({startDate:'%y-%M-%D 00:00:00',dateFmt:'yyyy-MM-dd',alwaysUseStartDate:false,minDate:'#F{$dp.$D(\'time_start\')}'});
        });
    })

    // 每页全选
    $('#j-checkall').on('click', function(){
        var $temp1 = $('.check-item .input-check');
        var $temp2 = $('.box-table .list tbody tr');
        var $this = $(this);
        if($this.is(':checked')){
            $temp1.each(function(){
                this.checked = true;
            });
            $temp2.addClass('selected');
        }else{
            $temp1.each(function(){
                this.checked = false;
            });
            $temp2.removeClass('selected');
        }
    });
    // 单选
    $('.check-item .input-check').on('click', function() {
        var $this = $(this);
        if ($this.is(':checked')) {
            $this.parent().parent().addClass('selected');
        } else {
            $this.parent().parent().removeClass('selected');
        }
    });

    function on_exam(){
        var exam = $('.exam p span').text();
        $('#free_state_Id').val(1201);
        $('.box-search select').html('<option value>请选择</option>');
        $('.box-search .input-text').val('');
        document.getElementById('click_submit').click();
    }
    

    // 获取所有选中多选框的值
    checkval = function(op,num){
        // console.log(op)
        if(num=='one'){
            var str = op;
        }else{
            var str = '';
            $(".check-item .input-check:checked").each(function(){
                str += $(this).val() + ',';
            });
        }
        if(str.length > 0){
            str = str.substring(0, str.length - 1);
        }
        if(str.length<1){
            we.msg('minus','请先选中要确认的数据');
            return false;
        }
        var an = function(){
            confirmed(str);
        }
        $.fallr('show', {
            buttons: {
                button1: {text: '确定', danger: true, onclick: an},
                button2: {text: '取消'}
            },
            content: '是否确认？',
            icon: 'trash',
            afterHide: function() {
                we.loading('hide');
            }
        });
    };

    // 确认操作
    function confirmed(id){
        console.log(id)
        we.loading('show');
        $.ajax({
            type:'post',
            url:'/qmdd2018/index.php?r=clubMemberUpgrade/confirmed&id='+id,
            // data:{id:id},
            dataType:'json',
            success: function(data){
                we.loading('hide');
                if(data.status==1){
                    we.success(data.msg, data.redirect);
                }else{
                    we.msg('minus', data.msg);
                }
            }
        });
        return false;
    }
</script>